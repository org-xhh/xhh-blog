
### 每次打开页面图片视频资源很耗流量，有没有办法解决？

#### 图片：

浏览器强缓存

![alt text](image-4.png)

#### 视频：

2.1 range请求头

Range: bytes=0-1024

如果服务器支持范围请求，它会以状态码206 Partial Content响应，并在消息体中包含指定范围的内容。

这种请求方式通常不支持强制缓存，因为Range请求的设计初衷是为了提高网络传输效率，允许客户端只加载视频的一部分，而不是整个视频文件。

2.2 完整文件请求

### 前端获取当前时间，不同时区时间不一样如何统一？
```
let moment = require('moment-timezone')
moment.tz(date, 'Asia/Shanghai').format('YYYY-MM-DD HH:mm:ss') // 统一为北京时间（东八区）
```

### 后台通过aes加密，前端通过aes解密，加密过后的特殊字符含有“+”号的无法正确解密？

浏览器会把url中的+转为空格，导致解密失败。

解决办法：

1. 服务端把将“+”号转义为“%2B”，前端就可以把%2B解析为+了；

2. 使用base64编解码，不会出现+特殊字符。

### canvas 获取 video 视频第一帧做为封面图，偶现封面图加载不出来?
代码如下：
```
const videoEle = document.createElement('video')
videoEle.src = video
videoEle.crossOrigin = 'anonymous'
videoEle.currentTime = 1
videoEle.oncanplay = () => {
    const canvas = document.createElement('canvas')
    canvas.width = 80
    canvas.height = 80
    canvas.getContext('2d').drawImage(videoEle, 0, 0, canvas.width, canvas.height)
    const previewImgSrc = canvas.toDataURL('image/png')
    console.log(previewImgSrc) // 封面图
}
```
比较大的视频(时长30min左右)会偶现封面图加载不出来的情况。

把视频时间从1改成0.9，未复现以上问题：
```
videoEle.currentTime = 0.9
```