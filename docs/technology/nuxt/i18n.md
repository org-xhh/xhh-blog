# 国际化

### 1. npm i @nuxtjs/i18n@7 --save

nuxt2 对应 @nuxtjs/i18n@7

### 2. 配置多语言
![alt text](image-3.png)

### 3. 创建 i18n 实例
```
import enLocale from 'element-ui/lib/locale/lang/en'
import zhLocale from 'element-ui/lib/locale/lang/zh-CN'

import zh from './zh'
import en from './en'

const i18n = {
  locales: ['en', 'zh'],
  strategy: 'no_prefix', // 不使用语言前缀
  defaultLocale: 'zh',
  vueI18n: {
    fallbackLocale: 'en', // 回退策略
    messages: {
      zh: {
        ...zh,
        ...zhLocale
      },
      en: {
        ...en,
        ...enLocale
      }
    }
  },
  // detectBrowserLanguage: {
    // useCookie: true // 默认存cookie：i18n_redirected,例如zh
  // }
}

export default i18n 
```
如果手动删除cookie(i18n_redirected)，那默认语言会取浏览器设置的。
![alt text](image-4.png)

### 4. nuxt.config.js i18n 配置
```
import i18n from '../../src/language'

modules: [
    '@nuxtjs/axios',
    '@nuxtjs/style-resources',
    [
      '@nuxtjs/i18n',
      i18n
    ]
]
```

### 5. element-ui 组件配置多语言切换
```
import Vue from 'vue'
import Element from 'element-ui'
import locale from 'element-ui/lib/locale/lang/zh-CN' // 默认

export default ({
  app
}) => {
  Vue.use(Element, {
    locale,
    i18n: (key, value) => app.i18n.t(key, value)
  })
}
```
### 6. 切换语言
```
<span>{{ $t('common.lang') }}</span>
<button @click="translateLang('zh')">切换为中文</button>
<button @click="translateLang('en')">切换为英文</button>

translateLang(lang) {
    this.$i18n.setLocale(lang)
}
```

---
参考文档：
https://i18n.nuxtjs.org/docs/getting-started