import{_ as n,D as p,c as e,I as t,w as l,a3 as s,o as i,a as c}from"./chunks/framework.C5U8cnJv.js";const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ8AAABQCAYAAAAHgPCoAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdDSURBVHhe7Z3Na11FGMbz57hwWReu3HRViNSVCzeuCl35gWQR78qCkIWQXRe3FURcKVh0ZdpGxEVpN0GxkmAJiASEgoELhRsojHfOOXPOzDvvnHtmbm6rOb8LP8h0Ps7M8z7z9JKktxuvvHrJAIDkHfPxdN8cnMzMfG661/MzM//nxBzcu20+uqLNGw+EBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQBGEx+i5Y540v3mdes0e7irzYOwQHqOnC4/5szOVv37cUebB2CE8xs7OIzOzyTF7ZHa0foAEhMfYceFxsm/e1foBEhAeY+eLQxsdxhzf0fsBEhAeY+fb4zo8/iA8IA/CY+Rc/u6kyg5+ogK5EB4jZ+dh9R2P8PX8zMz+PjY/fXXDvKXMAbAQHiOnCo+596NZ/yP3Fq/5n/vmk5F/3B7oEB4Q8/YNc/PnE+NyZP7LbXNZGwejhvCAJNea74cYc2y+4d0HCAgP6OG2OXhmw2NmHuxo/TBmCA/oYdc8qH/9lPCACMIDevjS/P68CY9PtX4YM4QHJLn2Q/M9j2e/ml2lH8YN4TFq7piDp4fm+8+uhz9NuTIxnz90P205M0++vu7NAaghPEaN91ke9r9RbH7Xo3vZf46/y49pQYXwGDXvmd17h+bpzA+MxWs+M09/2zc3t95U5gDUEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUAThAQBFEB4AUER2eLz2+hvm/Q8+NFtbW5DA6mN1QqvzBV1Xx2mo3e1cssPDPvz+/fvm9PQUElh9rE5odb6g6+o4DbW7nUt2eNj00jYFIS7ptT4oB11Xx+qn3e1cCI81gcnXA7qujtVPu9u5EB5rApOvB3RdHaufdrdzOf/wuDsxGxsTs6f1jYhhJt8zk40NM7mr9V18jm5tLryy4bHcN8N0PTV72/66jk0zfayPHxNWP+1u50J4ZFKZcntP7fMZZvKLHR5VOFydmiOlz2K13Lx1pPalGKarXqc6rC5wgDyems0B57P6aXc7F8IjE8JjOP3hcWSmV/PPPkzXdJ2G1u9/ycUKj9ogm9uTxaEWRasQwVId2PW5gzfGWsyr/twVWx3bjd+8Na0uY9VvTeuPFyauTOT6fDM1+594/e5vx+Bt9hIDDjN5GB61sRfPds+IjFCPd3toL57d89XFvIUG3ZzE2PY500qzut/WxB8f1ig4t69jY9bJtqJLpaMyp8U+b7nRJcN0TYdEFGhJT9WoPqnmdB5x2iZ1ajw19frtHH9tvz7p2vXdJ39Ov65WP+1u5/JCwiNqt0WtD9yK085txgWmS421bfmcRkg3vzGImxsaqCmIe/vcmD5sd8VImVIyzOThmWoziWel9tlc3Gpss+fIZNpYt27b1rULz+/6xPndxRNtXWeBm+vR7T/NMF176hScp89TPT5p9t5qpMwNnt/Ux413IRPUfUido1o17UD/rs4prH7a3c7lxbzz8ESORe0E74jnVWMDI9Zj6gLI8bLtm8Sf1+CvLfckCpI0pWCYyZXw8NYOzNtnDHXPoa52baeHfE7YDrXz51X4a0d7Cs/TGx7Vnr25sp1gmK7xGVt8rezXgz3lodSiVydZH9GO6+yNXdCtHe8pOKeyLw2rn3a3c3mp4ZE2VzzPpbVEF1W2fVPXX8drJQotCpI0pWCYyTPCQ+7LRzWnf7aGZm35nLDta1d/Ha/V6BGZNSM8IuKaawzTNV0nf0/9ngrPEhCde4lOan26dlxnZa3qLLFGwTnHFB6RqC2KkezYpBHleNn2jVD3qaawyD39V8KjzxjqnjVda+Rzwnaone0L6uAT7Wn18EjWpWGYrqk61c9o/zzLUx5KLXp1kvUR7bjOqdrFewrO2ecRD6ufdrdzebnhIdO9PbxWOG2sa8vxst1v6mpPrq1exK4guiljhpk8Izz6ziT3nBjr2vI5YVvM1Yzu2pFZ+3X2kX3Buj0M01WvU/2M9H5DT8V7bNeMzr2gTydZH23skjrXbdknzqntS8Hqp93tXF5yeCxoCubentWFi+dpY7t+OV4vQGuSBdU+2rXShY0KUvUv5iQuhWOYycN9SW2ked346Pxyz8pYf135nLAda19fBLeWp0VkVqFzWy+5t5rkuj0M01XW16HsI+mpmmAdV4vo3DXJ88j6iPayOvfVRqudneN7XWL10+52LucfHlAx1OSQB7qujtVPu9u5EB5rApOvB3RdHaufdrdzITzWBCZfD+i6OlY/7W7nQnisCUy+HtB1dax+2t3OJTs8+BSn5fCJV+sBXVfHaajd7Vyyw4PPj1yO1YfP2jx/0HV1nIba3c4lOzwAACyEBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQBGEBwAUQXgAQAGXzL8I03/0KMVVrwAAAABJRU5ErkJggg==",r="/xhh-blog/assets/image-1.OTJ3BYfO.png",q=JSON.parse('{"title":"create-react-app","description":"","frontmatter":{},"headers":[],"relativePath":"technology/react/create-react-app.md","filePath":"technology/react/create-react-app.md"}'),d={name:"technology/react/create-react-app.md"},u=s(`<h1 id="create-react-app" tabindex="-1">create-react-app <a class="header-anchor" href="#create-react-app" aria-label="Permalink to &quot;create-react-app&quot;">​</a></h1><h2 id="项目环境" tabindex="-1">项目环境 <a class="header-anchor" href="#项目环境" aria-label="Permalink to &quot;项目环境&quot;">​</a></h2><table tabindex="0"><thead><tr><th>模块</th><th>版本</th></tr></thead><tbody><tr><td>node</td><td>18+</td></tr><tr><td>react</td><td>18+</td></tr><tr><td>react-dom</td><td>18+</td></tr><tr><td>react-router-dom</td><td>6+</td></tr><tr><td>react-redux</td><td>9+</td></tr><tr><td>@reduxjs/toolkit</td><td>2+</td></tr></tbody></table><h2 id="新建项目" tabindex="-1">新建项目 <a class="header-anchor" href="#新建项目" aria-label="Permalink to &quot;新建项目&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npx creat-react-app react-project</span></span></code></pre></div><h2 id="配置路由" tabindex="-1">配置路由 <a class="header-anchor" href="#配置路由" aria-label="Permalink to &quot;配置路由&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm i react-router-dom</span></span></code></pre></div><p>index.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import { BrowserRouter } from &#39;react-router-dom&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;));</span></span>
<span class="line"><span>root.render(</span></span>
<span class="line"><span>  &lt;React.StrictMode&gt;</span></span>
<span class="line"><span>      &lt;BrowserRouter&gt;</span></span>
<span class="line"><span>        &lt;App /&gt;</span></span>
<span class="line"><span>      &lt;/BrowserRouter&gt;</span></span>
<span class="line"><span>  &lt;/React.StrictMode&gt;</span></span>
<span class="line"><span>);</span></span></code></pre></div><p>App.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import { useRoutes } from &quot;react-router-dom&quot;</span></span>
<span class="line"><span>import routes from &#39;./router/index.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function App() {</span></span>
<span class="line"><span>  const element = useRoutes(routes)</span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div className=&quot;App&quot;&gt;</span></span>
<span class="line"><span>      &lt;header className=&quot;App-header&quot;&gt;</span></span>
<span class="line"><span>        {/* &lt;Routes&gt;</span></span>
<span class="line"><span>          &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;}&gt;&lt;/Route&gt;</span></span>
<span class="line"><span>          &lt;Route path=&quot;/login&quot; element={&lt;Login /&gt;}&gt;&lt;/Route&gt;</span></span>
<span class="line"><span>        &lt;/Routes&gt; */}</span></span>
<span class="line"><span>        {element}</span></span>
<span class="line"><span>      &lt;/header&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>router/index.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import Home from &#39;../pages/home.js&#39;</span></span>
<span class="line"><span>import Login from &#39;../pages/login.js&#39;</span></span>
<span class="line"><span>import NotFound from &#39;../pages/notFound.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let routes = [</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        path: &#39;/&#39;,</span></span>
<span class="line"><span>        element: &lt;Home /&gt;</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        path: &#39;/login&#39;,</span></span>
<span class="line"><span>        element: &lt;Login /&gt;</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        path: &#39;*&#39;,</span></span>
<span class="line"><span>        element: &lt;NotFound /&gt;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>]</span></span>
<span class="line"><span>export default routes</span></span></code></pre></div><h2 id="路由鉴权" tabindex="-1">路由鉴权 <a class="header-anchor" href="#路由鉴权" aria-label="Permalink to &quot;路由鉴权&quot;">​</a></h2><p>router/index.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import Auth from &#39;./authRouter.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const authRoutes = (routes) =&gt; {</span></span>
<span class="line"><span>    return routes.map((item) =&gt; {</span></span>
<span class="line"><span>        if (item.needAuth) {</span></span>
<span class="line"><span>            return {</span></span>
<span class="line"><span>                path: item.path,</span></span>
<span class="line"><span>                element: (</span></span>
<span class="line"><span>                    &lt;Auth&gt;</span></span>
<span class="line"><span>                        {item.element}</span></span>
<span class="line"><span>                    &lt;/Auth&gt;</span></span>
<span class="line"><span>                )</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            delete item.needAuth</span></span>
<span class="line"><span>            return item</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    })</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default authRoutes(routes)</span></span></code></pre></div><p>authRouter.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>import { getToken } from &quot;../utils/storage&quot;;</span></span>
<span class="line"><span>import { Navigate, useLocation } from &quot;react-router-dom&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const Auth = ({ children }) =&gt; {</span></span>
<span class="line"><span>    const hasToken = getToken()</span></span>
<span class="line"><span>    const location = useLocation()</span></span>
<span class="line"><span>    if (hasToken) {</span></span>
<span class="line"><span>        if (location.pathname === &#39;/login&#39;) {</span></span>
<span class="line"><span>            return &lt;Navigate to=&quot;/&quot; replace /&gt;</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            return &lt;&gt;{children}&lt;/&gt;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    } else {</span></span>
<span class="line"><span>        // 未登录</span></span>
<span class="line"><span>        if (location.pathname === &#39;/login&#39;) {</span></span>
<span class="line"><span>            return &lt;&gt;{children}&lt;/&gt;</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            return &lt;Navigate to=&quot;/login&quot; replace /&gt;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default Auth</span></span></code></pre></div><h2 id="路由传参" tabindex="-1">路由传参 <a class="header-anchor" href="#路由传参" aria-label="Permalink to &quot;路由传参&quot;">​</a></h2><h4 id="usesearchparams" tabindex="-1">useSearchParams <a class="header-anchor" href="#usesearchparams" aria-label="Permalink to &quot;useSearchParams&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 携带参数</span></span>
<span class="line"><span>navigate(&#39;/page3?origin=home&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 获取</span></span>
<span class="line"><span>import { useSearchParams } from &quot;react-router-dom&quot;</span></span>
<span class="line"><span>function Page3() {</span></span>
<span class="line"><span>    let [searchParams] = useSearchParams();</span></span>
<span class="line"><span>    console.log(searchParams.get(&#39;origin&#39;))</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><h4 id="useparams" tabindex="-1">useParams <a class="header-anchor" href="#useparams" aria-label="Permalink to &quot;useParams&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 配置路由</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  path: &#39;/Page1/:id&#39;,</span></span>
<span class="line"><span>  element: &lt;Page1 /&gt;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 携带参数</span></span>
<span class="line"><span>&lt;Link to=&quot;/page1/111&quot;&gt;go Page1&lt;/Link&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 获取</span></span>
<span class="line"><span>import { useParams } from &#39;react-router-dom&#39;;</span></span>
<span class="line"><span>function Page1() {</span></span>
<span class="line"><span>  const params = useParams();</span></span>
<span class="line"><span>  console.log(&#39;id:&#39;, params.id)</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><h4 id="uselocation" tabindex="-1">useLocation <a class="header-anchor" href="#uselocation" aria-label="Permalink to &quot;useLocation&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 携带参数</span></span>
<span class="line"><span>&lt;Link to=&quot;/page1/111&quot; state={{name:666}}&gt;go Page1&lt;/Link&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 获取</span></span>
<span class="line"><span>import { useLocation } from &quot;react-router-dom&quot;;</span></span>
<span class="line"><span>function Page1() {</span></span>
<span class="line"><span>  console.log(&#39;data:&#39;, useLocation().state)</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="样式使用" tabindex="-1">样式使用 <a class="header-anchor" href="#样式使用" aria-label="Permalink to &quot;样式使用&quot;">​</a></h2><h4 id="直接在-js-文件中引入样式文件" tabindex="-1">直接在 JS 文件中引入样式文件 <a class="header-anchor" href="#直接在-js-文件中引入样式文件" aria-label="Permalink to &quot;直接在 JS 文件中引入样式文件&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import &#39;./App.css&#39;;</span></span></code></pre></div><h4 id="inline-样式" tabindex="-1">inline 样式 <a class="header-anchor" href="#inline-样式" aria-label="Permalink to &quot;inline 样式&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const divStyle = {</span></span>
<span class="line"><span>  color: &#39;red&#39;,</span></span>
<span class="line"><span>  marginBottom: &#39;10px&#39;</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>return &lt;div style={divStyle}&gt;content&lt;/div&gt;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;div style={{ cursor: &#39;pointer&#39;,marginTop: &#39;50px&#39; }}&gt;</span></span>
<span class="line"><span>  内容</span></span>
<span class="line"><span>&lt;/div&gt;</span></span></code></pre></div><h2 id="使用-scss" tabindex="-1">使用 scss <a class="header-anchor" href="#使用-scss" aria-label="Permalink to &quot;使用 scss&quot;">​</a></h2><p>create-react-app 内置了 scss 预处理器，只需要安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install node-sass@8 sass-loader --save-dev</span></span></code></pre></div><p>备注：node@18 对应 node-sass@8</p>`,35),h=s(`<h2 id="状态管理-redux" tabindex="-1">状态管理 Redux <a class="header-anchor" href="#状态管理-redux" aria-label="Permalink to &quot;状态管理 Redux&quot;">​</a></h2><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install @reduxjs/toolkit react-redux -S</span></span></code></pre></div><h4 id="为-react-提供-redux-store" tabindex="-1">为 React 提供 Redux Store <a class="header-anchor" href="#为-react-提供-redux-store" aria-label="Permalink to &quot;为 React 提供 Redux Store&quot;">​</a></h4><p>index.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import store from &#39;./store/index.js&#39;</span></span>
<span class="line"><span>import { Provider } from &#39;react-redux&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;));</span></span>
<span class="line"><span>root.render(</span></span>
<span class="line"><span>  &lt;React.StrictMode&gt;</span></span>
<span class="line"><span>    &lt;Provider store={store}&gt;</span></span>
<span class="line"><span>        &lt;App /&gt;</span></span>
<span class="line"><span>    &lt;/Provider&gt;</span></span>
<span class="line"><span>  &lt;/React.StrictMode&gt;</span></span>
<span class="line"><span>);</span></span></code></pre></div><h4 id="创建-redux-state-slice" tabindex="-1">创建 Redux State Slice <a class="header-anchor" href="#创建-redux-state-slice" aria-label="Permalink to &quot;创建 Redux State Slice&quot;">​</a></h4><p>store/counterSlice.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import { createSlice } from &#39;@reduxjs/toolkit&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export const counterSlice = createSlice({</span></span>
<span class="line"><span>  name: &#39;counter&#39;,</span></span>
<span class="line"><span>  initialState: {</span></span>
<span class="line"><span>    value: 0</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  reducers: {</span></span>
<span class="line"><span>    increment: state =&gt; {</span></span>
<span class="line"><span>      state.value += 1</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    decrement: state =&gt; {</span></span>
<span class="line"><span>      state.value -= 1</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    incrementByAmount: (state, action) =&gt; {</span></span>
<span class="line"><span>      state.value += action.payload</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export const { increment, decrement, incrementByAmount } = counterSlice.actions</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default counterSlice.reducer</span></span></code></pre></div><h4 id="将-slice-reducers-添加到-redux-store-中" tabindex="-1">将 Slice Reducers 添加到 Redux Store 中 <a class="header-anchor" href="#将-slice-reducers-添加到-redux-store-中" aria-label="Permalink to &quot;将 Slice Reducers 添加到 Redux Store 中&quot;">​</a></h4><p>store/index.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import { configureStore } from &#39;@reduxjs/toolkit&#39;</span></span>
<span class="line"><span>import counterReducer from &#39;./counterSlice&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default configureStore({</span></span>
<span class="line"><span>  reducer: {</span></span>
<span class="line"><span>    counter: counterReducer</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>})</span></span></code></pre></div><h4 id="在-react-组件中使用-redux-状态和操作" tabindex="-1">在 React 组件中使用 Redux 状态和操作 <a class="header-anchor" href="#在-react-组件中使用-redux-状态和操作" aria-label="Permalink to &quot;在 React 组件中使用 Redux 状态和操作&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import { useSelector, useDispatch } from &#39;react-redux&#39;</span></span>
<span class="line"><span>import { decrement, increment, incrementByAmount } from &#39;../store/counterSlice&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function Page2() {</span></span>
<span class="line"><span>  const count = useSelector(state =&gt; state.counter.value)</span></span>
<span class="line"><span>  const dispatch = useDispatch()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return &lt;div&gt;</span></span>
<span class="line"><span>      &lt;main&gt;Welcome to Page2&lt;/main&gt;</span></span>
<span class="line"><span>      &lt;div&gt;{count}&lt;/div&gt;</span></span>
<span class="line"><span>      &lt;div&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(increment())}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          Increment</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(incrementByAmount(5))}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          Increment 5</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(decrement())}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          Decrement</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>      &lt;/div&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default Page2;</span></span></code></pre></div><h4 id="页面效果" tabindex="-1">页面效果 <a class="header-anchor" href="#页面效果" aria-label="Permalink to &quot;页面效果&quot;">​</a></h4><p><img src="`+o+`" alt="alt text"></p><h2 id="配置多环境" tabindex="-1">配置多环境 <a class="header-anchor" href="#配置多环境" aria-label="Permalink to &quot;配置多环境&quot;">​</a></h2><p>Create React App 搭建的项目，npm run start 指向 development，npm run build 指向 production，通过 process.env.NODE_ENV 获取。</p><h4 id="第一种方式-使用-cross-env" tabindex="-1">第一种方式：使用 cross-env <a class="header-anchor" href="#第一种方式-使用-cross-env" aria-label="Permalink to &quot;第一种方式：使用 cross-env&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 安装 cross-env</span></span>
<span class="line"><span>npm i cross-env -D</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 配置不同环境命令</span></span>
<span class="line"><span>&quot;build:release&quot;: &quot;cross-env REACT_APP_ENV=release react-scripts build&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 获取</span></span>
<span class="line"><span>process.env.REACT_APP_ENV // release</span></span></code></pre></div><h4 id="第二种方式-使用-dotenv" tabindex="-1">第二种方式：使用 dotenv <a class="header-anchor" href="#第二种方式-使用-dotenv" aria-label="Permalink to &quot;第二种方式：使用 dotenv&quot;">​</a></h4><p>安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install dotenv-cli -D</span></span></code></pre></div><p>自定义环境变量名</p><p><img src="`+r+`" alt="alt text"></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 配置</span></span>
<span class="line"><span>&quot;start&quot;: &quot;dotenv -e .env.release react-scripts start&quot;,</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 获取</span></span>
<span class="line"><span>process.env.REACT_APP_ENV // release</span></span></code></pre></div><h2 id="异步请求-axios" tabindex="-1">异步请求 axios <a class="header-anchor" href="#异步请求-axios" aria-label="Permalink to &quot;异步请求 axios&quot;">​</a></h2><p>安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm i axios</span></span></code></pre></div><p>config.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 不同环境接口地址</span></span>
<span class="line"><span>const apiList = {</span></span>
<span class="line"><span>    development: &quot;https://www.dev.com/&quot;,</span></span>
<span class="line"><span>    production: &quot;https://www.prod.com/&quot;,</span></span>
<span class="line"><span>    release: &quot;https://www.release.com/&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>const env = process.env.REACT_APP_ENV</span></span>
<span class="line"><span>export const baseUrl = apiList[env]</span></span></code></pre></div><p>axios.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import axios from &#39;axios&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import { baseUrl } from &#39;./config&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 创建axios实例</span></span>
<span class="line"><span>const service = axios.create({</span></span>
<span class="line"><span>  baseURL: baseUrl,</span></span>
<span class="line"><span>  timeout: 30000 // 请求超时时间</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 请求拦截器</span></span>
<span class="line"><span>service.interceptors.request.use(</span></span>
<span class="line"><span>  config =&gt; {</span></span>
<span class="line"><span>    // config.headers[&#39;token&#39;] = &#39;&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return config</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  error =&gt; {</span></span>
<span class="line"><span>    // 请求失败</span></span>
<span class="line"><span>    return error</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 响应拦截器</span></span>
<span class="line"><span>service.interceptors.response.use(</span></span>
<span class="line"><span>  response =&gt; {</span></span>
<span class="line"><span>    const res = response.data || {}</span></span>
<span class="line"><span>    if (res.code !== 200) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return res</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  // 处理错误响应</span></span>
<span class="line"><span>  error =&gt; {</span></span>
<span class="line"><span>    if (error.response &amp;&amp; error.response.status === 401) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    } else if (error.response &amp;&amp; error.response.status === 403) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return Promise.reject(error)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default service</span></span></code></pre></div><p>api.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import request from &#39;../axios/index&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export function getInitData(data) {</span></span>
<span class="line"><span>  return request({</span></span>
<span class="line"><span>    url: &#39;/data&#39;,</span></span>
<span class="line"><span>    method: &#39;get&#39;,</span></span>
<span class="line"><span>    params: data</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export function setInitData(data) {</span></span>
<span class="line"><span>  return request({</span></span>
<span class="line"><span>    url: &#39;/setdata&#39;,</span></span>
<span class="line"><span>    method: &#39;post&#39;,</span></span>
<span class="line"><span>    data</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="父子组件交互" tabindex="-1">父子组件交互 <a class="header-anchor" href="#父子组件交互" aria-label="Permalink to &quot;父子组件交互&quot;">​</a></h2><p>父组件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import Button from &#39;../components/button&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function Page1() {</span></span>
<span class="line"><span>  const buttonObj = {</span></span>
<span class="line"><span>    title: &#39;点击按钮&#39;,</span></span>
<span class="line"><span>    bgColor: &#39;red&#39;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  // 点击子组件按钮时触发</span></span>
<span class="line"><span>  function handleChildFn(msg) {</span></span>
<span class="line"><span>    console.log(&#39;父组件接收消息：&#39;, msg)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return &lt;div&gt;</span></span>
<span class="line"><span>    {/* &lt;Button title={buttonObj.title} bgColor={buttonObj.bgColor} /&gt; */}</span></span>
<span class="line"><span>    &lt;Button {...buttonObj} onMessageChange={handleChildFn} /&gt;</span></span>
<span class="line"><span>  &lt;/div&gt;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default Page1;</span></span></code></pre></div><p>子组件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>function Button(props) {</span></span>
<span class="line"><span>  const buttonStyle = {</span></span>
<span class="line"><span>    padding: &#39;5px 10px&#39;,</span></span>
<span class="line"><span>    fontSize: &#39;16px&#39;,</span></span>
<span class="line"><span>    lineHeight: &#39;16px&#39;,</span></span>
<span class="line"><span>    border: &#39;1px solid #ccc&#39;,</span></span>
<span class="line"><span>    borderRadius: &#39;4px&#39;,</span></span>
<span class="line"><span>    cursor: &#39;pointer&#39;,</span></span>
<span class="line"><span>    marginTop: &#39;15px&#39;,</span></span>
<span class="line"><span>    backgroundColor: props.bgColor</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  function clickFn() {</span></span>
<span class="line"><span>    props.onMessageChange(&#39;来自子组件&#39;)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return &lt;div style={buttonStyle} onClick={clickFn}&gt;</span></span>
<span class="line"><span>    &lt;span&gt;{props.title}&lt;/span&gt;</span></span>
<span class="line"><span>  &lt;/div&gt;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default Button;</span></span></code></pre></div><hr><p>gitee 源码：</p><p><a href="https://gitee.com/org-xhh/react-project" target="_blank" rel="noreferrer">https://gitee.com/org-xhh/react-project</a></p>`,43);function g(m,b,v,x,k,A){const a=p("font");return i(),e("div",null,[u,t(a,{size:"3",color:"#ccc"},{default:l(()=>[c("要使用 less 的话，需要 npm run eject 暴露出 webpack 修改配置 或 使用其他工具。")]),_:1}),h])}const P=n(d,[["render",g]]);export{q as __pageData,P as default};
