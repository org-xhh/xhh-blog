import{_ as a,c as s,o as e,a3 as n}from"./chunks/framework.C5U8cnJv.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"technology/packaging-tool/vite.md","filePath":"technology/packaging-tool/vite.md"}'),t={name:"technology/packaging-tool/vite.md"},p=n(`<ul><li><a href="https://cn.vitejs.dev/config/build-options" target="_blank" rel="noreferrer">Vite</a></li></ul><h3 id="和-webpack-启动流程比较" tabindex="-1">和 webpack 启动流程比较 <a class="header-anchor" href="#和-webpack-启动流程比较" aria-label="Permalink to &quot;和 webpack 启动流程比较&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Vite启动流程</th><th>Webpack启动流程</th></tr></thead><tbody><tr><td>1. 启动服务器</td><td>1. 扫描所有模块</td></tr><tr><td>2. 按需编译首个页面</td><td>2. 打包成bundle</td></tr><tr><td>3. 其他模块等请求时再处理</td><td>3. 启动服务器</td></tr></tbody></table><p>Vite 采用了即时编译的方式，在开发模式下通过浏览器原生支持的 ES Module 特性进行加载，不需要打包。</p><h3 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.env.[mode]</span></span></code></pre></div><p>只有以 VITE_ 为前缀的变量才会暴露给经过 vite 处理的代码。</p><p>代码中访问：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>console.log(import.meta.env.VITE_SOME_KEY)</span></span></code></pre></div><h3 id="配置全局使用-less-变量" tabindex="-1">配置全局使用 less 变量 <a class="header-anchor" href="#配置全局使用-less-变量" aria-label="Permalink to &quot;配置全局使用 less 变量&quot;">​</a></h3><p>vite 和 webpack 不同，不需要 less-loader，只需要安装 less 模块</p><p>vite.config.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>export default defineConfig(({ mode }) =&gt; ({</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>    css: {</span></span>
<span class="line"><span>      preprocessorOptions: {</span></span>
<span class="line"><span>        less: {</span></span>
<span class="line"><span>         math: &#39;always&#39;, // 括号内使用数学计算</span></span>
<span class="line"><span>         additionalData: \`@import &quot;@/assets/css/public.less&quot;;\`</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      ...</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}))</span></span></code></pre></div><h3 id="加载图片" tabindex="-1">加载图片 <a class="header-anchor" href="#加载图片" aria-label="Permalink to &quot;加载图片&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// import.meta.url 提供当前模块的基准 URL</span></span>
<span class="line"><span>new URL(\`./assets/\${name}.png\`, import.meta.url).href</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 静态导入</span></span>
<span class="line"><span>import staticImage from &#39;@/assets/static.png&#39;</span></span></code></pre></div><h3 id="热更新" tabindex="-1">热更新 <a class="header-anchor" href="#热更新" aria-label="Permalink to &quot;热更新&quot;">​</a></h3><p>Vite 内置了基于浏览器原生模块热更新的开发服务器，无需额外配置即可实现快速的热更新。</p>`,18),i=[p];function l(o,c,d,r,h,u){return e(),s("div",null,i)}const m=a(t,[["render",l]]);export{g as __pageData,m as default};
